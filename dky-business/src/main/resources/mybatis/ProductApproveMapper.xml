<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dky.business.repository.repository.ProductApproveMapper" >
  <resultMap id="BaseResultMap" type="com.dky.common.bean.ProductApprove" >
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="AD_CLIENT_ID" property="adClientId" jdbcType="DECIMAL" />
    <result column="AD_ORG_ID" property="adOrgId" jdbcType="DECIMAL" />
    <result column="OWNERID" property="ownerid" jdbcType="DECIMAL" />
    <result column="CREATIONDATE" property="creationdate" jdbcType="DATE" />
    <result column="MODIFIERID" property="modifierid" jdbcType="DECIMAL" />
    <result column="MODIFIEDDATE" property="modifieddate" jdbcType="DATE" />
    <result column="ISACTIVE" property="isactive" jdbcType="CHAR" />
    <result column="M_DIM_NEW11_ID" property="mDimNew11Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW12_ID" property="mDimNew12Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW13_ID" property="mDimNew13Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW14_ID" property="mDimNew14Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW15_ID" property="mDimNew15Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW16_ID" property="mDimNew16Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW17_ID" property="mDimNew17Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW18_ID" property="mDimNew18Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW19_ID" property="mDimNew19Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW22_ID" property="mDimNew22Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW25_ID" property="mDimNew25Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW26_ID" property="mDimNew26Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW28_ID" property="mDimNew28Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW10_ID" property="mDimNew10Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW32_ID" property="mDimNew32Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW37_ID" property="mDimNew37Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW38_ID" property="mDimNew38Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW39_ID" property="mDimNew39Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW1_ID" property="mDimNew1Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW3_ID" property="mDimNew3Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW4_ID" property="mDimNew4Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW6_ID" property="mDimNew6Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW7_ID" property="mDimNew7Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW41_ID" property="mDimNew41Id" jdbcType="DECIMAL" />
    <result column="M_DIM_NEW9_ID" property="mDimNew9Id" jdbcType="DECIMAL" />
    <result column="YC_VALUE" property="ycValue" jdbcType="VARCHAR" />
    <result column="JK_VALUE" property="jkValue" jdbcType="DECIMAL" />
    <result column="XC_VALUE" property="xcValue" jdbcType="DECIMAL" />
    <result column="XBC_VALUE" property="xbcValue" jdbcType="DECIMAL" />
    <result column="LING_CC_VALUE" property="lingCcValue" jdbcType="DECIMAL" />
    <result column="LBCC_VALUE" property="lbccValue" jdbcType="DECIMAL" />
    <result column="XBCC_VALUE" property="xbccValue" jdbcType="DECIMAL" />
    <result column="XKCC_VALUE" property="xkccValue" jdbcType="DECIMAL" />
    <result column="DKSL_VALUE" property="dkslValue" jdbcType="DECIMAL" />
    <result column="HZXC_VALUE" property="hzxcValue" jdbcType="DECIMAL" />
    <result column="HZXC1_VALUE" property="hzxc1Value" jdbcType="DECIMAL" />
    <result column="DC1_VALUE" property="dc1Value" jdbcType="DECIMAL" />
    <result column="DC_VALUE" property="dcValue" jdbcType="DECIMAL" />
    <result column="MJK_VALUE" property="mjkValue" jdbcType="DECIMAL" />
    <result column="MJC_VALUE" property="mjcValue" jdbcType="DECIMAL" />
    <result column="QTXX_VALUE" property="qtxxValue" jdbcType="VARCHAR" />
    <result column="QTJX_VALUE" property="qtjxValue" jdbcType="VARCHAR" />
    <result column="LING_NUMBER2_VALUE" property="lingNumber2Value" jdbcType="VARCHAR" />
    <result column="LING_NUMBER1_VALUE" property="lingNumber1Value" jdbcType="VARCHAR" />
    <result column="LING_VALUE" property="lingValue" jdbcType="VARCHAR" />
    <result column="QTXBZZ_VALUE" property="qtxbzzValue" jdbcType="VARCHAR" />
    <result column="LXSX5_VALUE" property="lxsx5Value" jdbcType="VARCHAR" />
    <result column="LXSX2_VALUE" property="lxsx2Value" jdbcType="VARCHAR" />
    <result column="LXSX1_VALUE" property="lxsx1Value" jdbcType="VARCHAR" />
    <result column="LXSX4_VALUE" property="lxsx4Value" jdbcType="VARCHAR" />
    <result column="LXSX3_VALUE" property="lxsx3Value" jdbcType="VARCHAR" />
    <result column="QTLB_VALUE" property="qtlbValue" jdbcType="VARCHAR" />
    <result column="QTXB_VALUE" property="qtxbValue" jdbcType="VARCHAR" />
    <result column="QTXK_VALUE" property="qtxkValue" jdbcType="VARCHAR" />
    <result column="DK_VALUE" property="dkValue" jdbcType="VARCHAR" />
    <result column="QTMJ_VALUE" property="qtmjValue" jdbcType="VARCHAR" />
    <result column="AMJ_VALUE" property="amjValue" jdbcType="VARCHAR" />
    <result column="COLORARR" property="colorarr" jdbcType="VARCHAR" />
    <result column="DK_NUMBER" property="dkNumber" jdbcType="VARCHAR" />
    <result column="COLORARR_DES" property="colorarrDes" jdbcType="VARCHAR" />
    <result column="JZ_VALUE" property="jzValue" jdbcType="VARCHAR" />
    <result column="HUAX" property="huax" jdbcType="VARCHAR" />
    <result column="TANGZ" property="tangz" jdbcType="VARCHAR" />
    <result column="ISAPPROVE" property="isapprove" jdbcType="DECIMAL" />
    <result column="COLORVALUE" property="colorvalue" jdbcType="VARCHAR" />
    <result column="PDT" property="pdt" jdbcType="VARCHAR" />
    <result column="JGNO" property="jgno" jdbcType="VARCHAR" />
    <result column="CUSTOMER" property="customer" jdbcType="VARCHAR" />
    <result column="GH_PRICE1" property="ghPrice1" jdbcType="DECIMAL" />
    <result column="GH_PRICE" property="ghPrice" jdbcType="DECIMAL" />
    <result column="FD_RATE" property="fdRate" jdbcType="DECIMAL" />
    <result column="JL_PRICE" property="jlPrice" jdbcType="DECIMAL" />
    <result column="JX_TXT" property="jxTxt" jdbcType="VARCHAR" />
    <result column="X_TXT" property="xTxt" jdbcType="VARCHAR" />
    <result column="L_TXT" property="lTxt" jdbcType="VARCHAR" />
    <result column="SY_TXT" property="syTxt" jdbcType="VARCHAR" />
    <result column="XB_TXT" property="xbTxt" jdbcType="VARCHAR" />
    <result column="XK_TXT" property="xkTxt" jdbcType="VARCHAR" />
    <result column="NO" property="no" jdbcType="VARCHAR" />
    <result column="CZ_DATE" property="czDate" jdbcType="VARCHAR" />
    <result column="FH_DATE" property="fhDate" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="MOBILE" property="mobile" jdbcType="VARCHAR" />
    <result column="LS_PRICE" property="lsPrice" jdbcType="DECIMAL" />
    <result column="LS_PRICE1" property="lsPrice1" jdbcType="DECIMAL" />
    <result column="FD_RATE1" property="fdRate1" jdbcType="DECIMAL" />
    <result column="IS_MORE" property="isMore" jdbcType="CHAR" />
    <result column="XF_TYPE" property="xfType" jdbcType="VARCHAR" />
    <result column="XF_VALUE" property="xfValue" jdbcType="VARCHAR" />
    <result column="M_DIM_NEW9_ID1" property="mDimNew9Id1" jdbcType="DECIMAL" />
    <result column="QTXX_VALUE1" property="qtxxValue1" jdbcType="VARCHAR" />
    <result column="M_DIM_NEW9_ID2" property="mDimNew9Id2" jdbcType="DECIMAL" />
    <result column="QTXX_VALUE2" property="qtxxValue2" jdbcType="VARCHAR" />
    <result column="HK_TXT" property="hkTxt" jdbcType="VARCHAR" />
    <result column="ZK_TXT" property="zkTxt" jdbcType="VARCHAR" />
    <result column="HHK_TXT" property="hhkTxt" jdbcType="VARCHAR" />
    <result column="HZK_TXT" property="hzkTxt" jdbcType="VARCHAR" />
    <result column="XF_TXT" property="xfTxt" jdbcType="VARCHAR" />
    <result column="GJ_TXT" property="gjTxt" jdbcType="VARCHAR" />
    <result column="QTLINGOTHER" property="qtlingother" jdbcType="VARCHAR" />
    <result column="XW_VALUE" property="xwValue" jdbcType="VARCHAR" />
    <result column="SC_ISDC" property="scIsdc" jdbcType="DECIMAL" />
    <result column="SEP_LING" property="sepLing" jdbcType="VARCHAR" />
    <result column="JXW_VALUE" property="jxwValue" jdbcType="VARCHAR" />
    <result column="SJXC_VALUE" property="sjxcValue" jdbcType="VARCHAR" />
    <result column="XX_TXT" property="xxTxt" jdbcType="VARCHAR" />
    <result column="D_TXT" property="dTxt" jdbcType="VARCHAR" />
    <result column="HD_TXT" property="hdTxt" jdbcType="VARCHAR" />
    <result column="Z_TXT" property="zTxt" jdbcType="VARCHAR" />
    <result column="KOUD" property="koud" jdbcType="VARCHAR" />
    <result column="FUJ" property="fuj" jdbcType="VARCHAR" />
    <result column="TESGY" property="tesgy" jdbcType="VARCHAR" />
    <result column="M_PRODUCT_ID" property="mProductId" jdbcType="DECIMAL" />
    <result column="XB_VALUE" property="xbValue" jdbcType="DECIMAL" />
    <result column="XBZZ_VALUE" property="xbzzValue" jdbcType="DECIMAL" />
    <result column="C_CUSTOMER_ID" property="cCustomerId" jdbcType="DECIMAL" />
    <result column="DOCNO" property="docno" jdbcType="VARCHAR" />
    <result column="SH_REMARK" property="shRemark" jdbcType="VARCHAR" />
    <result column="NO1" property="no1" jdbcType="DECIMAL" />
    <result column="EXPRESSTYPE" property="expresstype" jdbcType="CHAR" />
    <result column="DCTIME" property="dctime" jdbcType="DATE" />
    <result column="NOERID" property="noerid" jdbcType="DECIMAL" />
    <result column="NOTIME" property="notime" jdbcType="DATE" />
  </resultMap>
  <sql id="Base_Column_List" >
    ID, AD_CLIENT_ID, AD_ORG_ID, OWNERID, CREATIONDATE, MODIFIERID, MODIFIEDDATE, ISACTIVE, 
    M_DIM_NEW11_ID, M_DIM_NEW12_ID, M_DIM_NEW13_ID, M_DIM_NEW14_ID, M_DIM_NEW15_ID, M_DIM_NEW16_ID, 
    M_DIM_NEW17_ID, M_DIM_NEW18_ID, M_DIM_NEW19_ID, M_DIM_NEW22_ID, M_DIM_NEW25_ID, M_DIM_NEW26_ID, 
    M_DIM_NEW28_ID, M_DIM_NEW10_ID, M_DIM_NEW32_ID, M_DIM_NEW37_ID, M_DIM_NEW38_ID, M_DIM_NEW39_ID, 
    M_DIM_NEW1_ID, M_DIM_NEW3_ID, M_DIM_NEW4_ID, M_DIM_NEW6_ID, M_DIM_NEW7_ID, M_DIM_NEW41_ID, 
    M_DIM_NEW9_ID, YC_VALUE, JK_VALUE, XC_VALUE, XBC_VALUE, LING_CC_VALUE, LBCC_VALUE, 
    XBCC_VALUE, XKCC_VALUE, DKSL_VALUE, HZXC_VALUE, HZXC1_VALUE, DC1_VALUE, DC_VALUE, 
    MJK_VALUE, MJC_VALUE, QTXX_VALUE, QTJX_VALUE, LING_NUMBER2_VALUE, LING_NUMBER1_VALUE, 
    LING_VALUE, QTXBZZ_VALUE, LXSX5_VALUE, LXSX2_VALUE, LXSX1_VALUE, LXSX4_VALUE, LXSX3_VALUE, 
    QTLB_VALUE, QTXB_VALUE, QTXK_VALUE, DK_VALUE, QTMJ_VALUE, AMJ_VALUE, COLORARR, DK_NUMBER, 
    COLORARR_DES, JZ_VALUE, HUAX, TANGZ, ISAPPROVE, COLORVALUE, PDT, JGNO, CUSTOMER, 
    GH_PRICE1, GH_PRICE, FD_RATE, JL_PRICE, JX_TXT, X_TXT, L_TXT, SY_TXT, XB_TXT, XK_TXT, 
    NO, CZ_DATE, FH_DATE, REMARK, MOBILE, LS_PRICE, LS_PRICE1, FD_RATE1, IS_MORE, XF_TYPE, 
    XF_VALUE, M_DIM_NEW9_ID1, QTXX_VALUE1, M_DIM_NEW9_ID2, QTXX_VALUE2, HK_TXT, ZK_TXT, 
    HHK_TXT, HZK_TXT, XF_TXT, GJ_TXT, QTLINGOTHER, XW_VALUE, SC_ISDC, SEP_LING, JXW_VALUE, 
    SJXC_VALUE, XX_TXT, D_TXT, HD_TXT, Z_TXT, KOUD, FUJ, TESGY, M_PRODUCT_ID, XB_VALUE, 
    XBZZ_VALUE, C_CUSTOMER_ID, DOCNO, SH_REMARK, NO1, EXPRESSTYPE, DCTIME, NOERID, NOTIME
  </sql>


    <!--订单分页查询 -->
    <select id="queryByPage" parameterType="com.dky.common.bean.ProductApprove" resultType="com.dky.common.response.view.ProductApproveView">
        SELECT id,no1,pdt,customer,czDate,mDimNew12Text,mDimNew15Text,mDimNew16Text,mDimNew17Text,xwValue,ycValue
       FROM (
        SELECT id,no1,pdt,customer,czDate,mDimNew12Text,mDimNew15Text,
        mDimNew16Text,mDimNew17Text,xwValue,ycValue,ROWNUM RN FROM (
          <include refid="queryTmpl"></include>
        ) WHERE 1=1
        <if test="null!=requestOffset">
            AND ROWNUM <![CDATA[ <= ]]>#{requestCount}
        </if>  ) A WHERE 1=1
        <if test="null!=requestOffset">
            AND RN <![CDATA[ >= ]]> #{requestOffset}
        </if>

    </select>

    <sql id="queryTmpl">
        SELECT
        t1.ID,
        t1.NO1,
        t1.PDT,
        t1.CUSTOMER,
        t1.CZ_DATE as czDate,
        t2.ATTRIBNAME as mDimNew12Text,
        t3.ATTRIBNAME as mDimNew15Text,
        t4.ATTRIBNAME as mDimNew16Text,
        t5.ATTRIBNAME as mDimNew17Text,
        t1.XW_VALUE as xwValue,
        t1.YC_VALUE as ycValue
        from M_PRODUCT_APPROVE t1
        LEFT JOIN M_DIM_NEW t2 on t1.M_DIM_NEW12_ID = t2.id
        LEFT JOIN M_DIM_NEW t3 on t1.M_DIM_NEW15_ID = t3.id
        LEFT JOIN M_DIM_NEW t4 on t1.M_DIM_NEW16_ID = t4.id
        LEFT JOIN M_DIM_NEW t5 on t1.M_DIM_NEW17_ID = t5.id
<<<<<<< HEAD
        <include refid="whereClause"></include>
=======
        WHERE t2.DIMFLAG='DIMFLAG_NEW12'
        AND t2.ISACTIVE = 'Y'
        AND t3.DIMFLAG='DIMFLAG_NEW15'
        AND t3.ISACTIVE = 'Y'
        AND t4.DIMFLAG='DIMFLAG_NEW16'
        AND t4.ISACTIVE = 'Y'
        AND t5.DIMFLAG='DIMFLAG_NEW17'
        AND t5.ISACTIVE = 'Y'
>>>>>>> 1513a6efae09a98755929281578d68a7987bcf0e
        ORDER by t1.NO1 DESC
    </sql>

    <sql id="whereClause">
      <where>

      </where>
    </sql>

    <select id="count" parameterType="com.dky.common.bean.ProductApprove" resultType="int">
     select count(1) from M_PRODUCT_APPROVE t1
    LEFT JOIN M_DIM_NEW t2 on t1.M_DIM_NEW12_ID = t2.id
    LEFT JOIN M_DIM_NEW t3 on t1.M_DIM_NEW15_ID = t3.id
    LEFT JOIN M_DIM_NEW t4 on t1.M_DIM_NEW16_ID = t4.id
    LEFT JOIN M_DIM_NEW t5 on t1.M_DIM_NEW17_ID = t5.id
    WHERE t1.ISACTIVE = 'Y'
    AND t2.DIMFLAG='DIMFLAG_NEW12'
    AND t2.ISACTIVE = 'Y'
    AND t3.DIMFLAG='DIMFLAG_NEW15'
    AND t3.ISACTIVE = 'Y'
    AND t4.DIMFLAG='DIMFLAG_NEW16'
    AND t4.ISACTIVE = 'Y'
    AND t5.DIMFLAG='DIMFLAG_NEW17'
    AND t5.ISACTIVE = 'Y'
    </select>

  <select id="queryProductApproveInfoList" resultType="ProductApproveInfoView">
    select
      t1.NO1 as no1,
      t1.JGNO as jgNo,
      t1.FH_DATE as fhDate,
      t2.VALUE as productValue,
      t1.CUSTOMER as customer,
      t1.COLORARR as colorArr,
      t1.XW_VALUE as xwValue,
      t1.YC_VALUE as ycValue,
      t1.JK_VALUE as jkValue,
      t1.XC_VALUE as xcValue,
      t3.ATTRIBNAME as mDimNew10Text,
      t4.ATTRIBNAME as mDimNew32Text,
      t1.LING_VALUE as lingValue,
      t5.ATTRIBNAME as mDimNew12Text,
      t1.FUJ as fuj,
      t1.XX_TXT as xxTxt,
      t1.D_TXT as dTxt,
      t1.HD_TXT as hdTxt,
      t1.JXW_VALUE as jxwValue,
      t1.SJXC_VALUE as sjxcValue,
      t1.REMARK as remark
    from M_PRODUCT_APPROVE t1
    LEFT JOIN M_PRODUCT t2 ON t1.M_PRODUCT_ID = t2.id
    LEFT JOIN M_DIM_NEW t3 ON t1.M_DIM_NEW10_ID = t3.id
    LEFT JOIN M_DIM_NEW t4 ON t1.M_DIM_NEW32_ID = t4.id
    LEFT JOIN M_DIM_NEW t5 ON t1.M_DIM_NEW12_ID = t5.id
    WHERE t1.ISACTIVE = 'Y'
    AND t3.DIMFLAG='DIMFLAG_NEW10'
    AND t3.ISACTIVE = 'Y'
    AND t4.DIMFLAG='DIMFLAG_NEW32'
    AND t4.ISACTIVE = 'Y'
    AND t5.DIMFLAG='DIMFLAG_NEW12'
    AND t5.ISACTIVE = 'Y'
    AND t1.ID IN
    <foreach collection="ids" item="item" index="index" open="(" separator="," close=")">
      #{item}
    </foreach>
    ORDER BY t1.NO1 DESC
  </select>

</mapper>